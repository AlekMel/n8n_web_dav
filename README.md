# n8n WebDAV нода

Эта нода предоставляет полнофункциональную интеграцию с WebDAV серверами для n8n, включая специальную поддержку Яндекс.Диск.

## Возможности

- **Полный набор операций с файлами**: загрузка, скачивание, удаление, копирование, перемещение и получение информации
- **Операции с папками**: создание, удаление, получение списка содержимого
- **Поддержка различных WebDAV серверов**: стандартные WebDAV серверы, Nextcloud/ownCloud, Яндекс.Диск, Microsoft SharePoint
- **Гибкая аутентификация**: поддержка Basic Auth и Token Auth
- **Безопасность**: правильная обработка учетных данных, поддержка HTTPS, опциональная проверка SSL сертификатов
- **Поддержка больших файлов**: увеличен лимит до 500MB, оптимизация для работы с объемными данными
- **Улучшенная обработка ошибок**: детальные сообщения об ошибках с HTTP статус-кодами
- **Корректный XML-парсинг**: правильная обработка WebDAV PROPFIND ответов с различными namespace префиксами

## Установка

```bash
npm install n8n-nodes-webdav
```

## Использование

1. Добавьте учетные данные WebDAV в n8n
2. Добавьте ноду WebDAV в ваш рабочий процесс
3. Выберите нужную операцию и настройте параметры
4. Запустите рабочий процесс

## Учетные данные

Для подключения к WebDAV серверам поддерживаются следующие типы аутентификации:

### Basic Auth
- WebDAV URL (обязательно)
- Имя пользователя
- Пароль

### Token Auth
- WebDAV URL (обязательно)
- Токен доступа

## Поддерживаемые операции

### Операции с файлами
- **Загрузка**: загрузка файла на WebDAV сервер
- **Скачивание**: скачивание файла с WebDAV сервера
- **Удаление**: удаление файла с WebDAV сервера
- **Копирование**: копирование файла на WebDAV сервере
- **Перемещение**: перемещение/переименование файла на WebDAV сервере
- **Получение информации**: получение метаданных файла

### Операции с папками
- **Создание**: создание новой папки на WebDAV сервере
- **Удаление**: удаление папки с WebDAV сервера
- **Список**: получение содержимого папки

## Особенности реализации

- Поддержка самоподписанных сертификатов
- Специфические настройки для Яндекс.Диск
- Детальная обработка ошибок с HTTP статус-кодами
- Эффективная работа с большими файлами (до 500MB)
- Правильная обработка бинарных данных
- Корректный парсинг WebDAV XML ответов с использованием fast-xml-parser
- Поддержка различных XML namespace префиксов (d:, D:, без префикса)

## Что нового в версии 0.1.7

### Критические улучшения:
- ✅ **Исправлен XML-парсинг**: теперь методы `stat()` и `getDirectoryContents()` корректно обрабатывают WebDAV PROPFIND ответы
- ✅ **Увеличен лимит файлов**: с 100MB до 500MB
- ✅ **Улучшена обработка ошибок**: детальные сообщения с HTTP статус-кодами (401, 403, 404, 409, 423, 507)
- ✅ **Добавлена поддержка streaming**: новые методы `getFileStream()` и `putFileStream()` для работы с большими файлами
- ✅ **Добавлен класс WebDAVError**: для более точной обработки ошибок WebDAV протокола
- ✅ **Улучшена совместимость**: поддержка различных WebDAV серверов с разными XML namespace префиксами
- ✅ **Добавлены параметры overwrite**: для методов `moveFile()` и `copyFile()`

### Технические детали:
- Использование `fast-xml-parser` для надежного парсинга XML
- Нормализация WebDAV ответов с учетом различных форматов
- Правильное декодирование URL путей
- Улучшенная фильтрация при получении списка файлов

## Лицензия

MIT 